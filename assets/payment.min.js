!function(){"use strict";function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){return(n=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return(u=i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function(){function e(){}var t=e.prototype;return t.execute=function(e){void 0===e&&(e={}),this.props=e;var t=this.render();return this.mount=t,this.mount},t.unmount=function(){this.isMount()&&(this.mount.parentNode.removeChild(this.mount),this.mount=null)},t.isMount=function(){return this.mount instanceof HTMLElement},e}(),l=function(e){return(e.getAttribute("class")||"").split(" ").filter(Boolean)},s=function(e,t){var n=l(e);-1===n.indexOf(t)&&(n.push(t),e.setAttribute("class",n.join(" ")))},f=function(e,t){var n=l(e);-1!==n.indexOf(t)&&(n.splice(n.indexOf(t),1),e.setAttribute("class",n.join(" ")))},p="style_root__k59xi",d=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.onClick,r=document.createElement("div");return s(r,p),r.addEventListener("click",n),r.appendChild(t),r},t}(a),h="style_cover__352rz",m="style_wrap__r6QoJ",v="style_cross__Dq62T",y="style_iframe__2XtWY",_="style_iframe-wrap__28kIv",b="style_inner__1WMoI",g=function(n){function o(){for(var e,r=arguments.length,o=Array(r),i=0;r>i;i++)o[i]=arguments[i];return t(c(e=n.call.apply(n,[this].concat(o))||this),"name","payment-page"),t(c(e),"handleClickCross",(function(t){t.stopPropagation(),(0,e.props.onForceClose)()})),e}var i,u,a;return r(o,n),o.prototype.render=function(){var e=this.props.onClose,t=new d,n=document.createElement("div");s(n,h);var r=document.createElement("div");r.innerHTML='<svg width="28" height="28" viewBox="0 0 28 28" fill="white" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.5255 14L0 25.5255V28H2.4745L14 16.4745L25.5255 28H28V25.5255L16.4745 14L28 2.4745V0H25.5255L14 11.5255L2.4745 0H0V2.4745L11.5255 14Z"/>\n</svg>\n',s(r,v),r.addEventListener("click",this.handleClickCross);var o=document.createElement("div");s(o,m);var i=document.createElement("div");s(i,b);var u=document.createElement("iframe");u.setAttribute("name",this.name),s(u,y);var c=document.createElement("div");return s(c,_),n.appendChild(o),n.appendChild(r),o.appendChild(c),c.appendChild(u),t.execute({children:n,onClick:e})},i=o,(u=[{key:"url",get:function(){var e=this.props.url,t=e.indexOf("?");return-1===t?e:e.slice(0,t)}}])&&e(i.prototype,u),a&&e(i,a),Object.defineProperty(i,"prototype",{writable:!1}),o}(a),w="style_button__1YfrP",P="style_active__21G-H",C=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,n=e.onClick,r=e.children,o=document.createElement("button");return o.addEventListener("click",n),o.innerText=r,s(o,w),t&&s(o,P),o},t}(a),E="style_confirm-panel__1s25-",j="style_button-wrap__1Rcd5",x="style_label__wJvJQ",O=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,n=e.onCancel,r=new d,o=document.createElement("div");s(o,E);var i=document.createElement("div");i.innerText="Вы уверены, что хотите закрыть окно?",s(i,x);var u=document.createElement("div");s(u,j);var c=new C,a=new C;return o.appendChild(i),o.appendChild(u),u.appendChild(c.execute({onClick:t,isActive:!0,children:"Закрыть"})),u.appendChild(a.execute({onClick:n,children:"Отмена"})),r.execute({children:o})},t}(a),k=function(e){window.location.replace(e)};function A(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}function F(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var u=n.then;if("function"==typeof u)return void u.call(n,(function(t){i(e,t)}),(function(n){r[e]={status:"rejected",reason:n},0==--o&&t(r)}))}r[e]={status:"fulfilled",value:n},0==--o&&t(r)}for(var u=0;r.length>u;u++)i(u,r[u])}))}var L=setTimeout;function T(e){return!(!e||void 0===e.length)}function R(){}function I(e){if(!(this instanceof I))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],N(e,this)}function B(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,I._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void S(t.promise,e)}M(t.promise,r)}else(1===e._state?M:S)(t.promise,e._value)}))):e._deferreds.push(t)}function M(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof I)return e._state=3,e._value=t,void H(e);if("function"==typeof n)return void N((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,H(e)}catch(t){S(e,t)}var r,o}function S(e,t){e._state=2,e._value=t,H(e)}function H(e){2===e._state&&0===e._deferreds.length&&I._immediateFn((function(){e._handled||I._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;n>t;t++)B(e,e._deferreds[t]);e._deferreds=null}function J(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function N(e,t){var n=!1;try{e((function(e){n||(n=!0,M(t,e))}),(function(e){n||(n=!0,S(t,e))}))}catch(e){if(n)return;n=!0,S(t,e)}}I.prototype.catch=function(e){return this.then(null,e)},I.prototype.then=function(e,t){var n=new this.constructor(R);return B(this,new J(e,t,n)),n},I.prototype.finally=A,I.all=function(e){return new I((function(t,n){if(!T(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){i(e,t)}),n)}r[e]=u,0==--o&&t(r)}catch(e){n(e)}}for(var u=0;r.length>u;u++)i(u,r[u])}))},I.allSettled=F,I.resolve=function(e){return e&&"object"==typeof e&&e.constructor===I?e:new I((function(t){t(e)}))},I.reject=function(e){return new I((function(t,n){n(e)}))},I.race=function(e){return new I((function(t,n){if(!T(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;o>r;r++)I.resolve(e[r]).then(t,n)}))},I._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){L(e,0)},I._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var U=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof U.Promise?U.Promise=I:(U.Promise.prototype.finally||(U.Promise.prototype.finally=A),U.Promise.allSettled||(U.Promise.allSettled=F));var W,V,q="style_body-scroll-disable__4o99q",Q=(W=function(e,r){var o,i=this;void 0===r&&(r={}),t(this,"closePopup",(function(e){return function(){i.confirm&&i.confirm.isMount()||!i.paymentPage||!i.paymentPage.isMount()||(i.confirm=new O,i.mount.appendChild(i.confirm.execute({onClose:i.forceClosePopup(e),onCancel:function(){return i.confirm.unmount()}})))}})),t(this,"forceClosePopup",(function(e){return function(){i.paymentPage&&i.paymentPage.unmount(),i.confirm&&i.confirm.unmount(),window.removeEventListener("message",i.messageBinding),i.messageBinding=null,function(){f(document.body,q);var e=document.getElementsByTagName("html")[0];f(e,q)}(),"function"==typeof e&&e()}})),t(this,"submitForm",(function(e,t,n){void 0===e&&(e="_self"),void 0===n&&(n=i.url);var r=document.createElement("form");r.setAttribute("action",n),r.setAttribute("method","POST"),r.setAttribute("target",e),Object.keys(t).forEach((function(e){var n=document.createElement("input"),o=function(e){if(e instanceof Object)try{return JSON.stringify(e)}catch(e){return""}return e}(t[e]);n.setAttribute("value",o),n.setAttribute("name",e),r.appendChild(n)})),i.mount.appendChild(r),r.submit(),i.mount.removeChild(r)})),t(this,"openPopup",(function(e){return void 0===e&&(e={}),new Promise((function(t,r){if(!(i.paymentPage&&i.paymentPage.isMount()&&i.messageBinding)){var o,u,c,a=n({},e,{publicId:i.publicId,style:e.style,extra:e.extra,version:i.version,successUrl:"#",failUrl:"#"});i.paymentPage=new g,i.mount.appendChild(i.paymentPage.execute({onClose:i.closePopup((function(){return r({isCrossClose:!0})})),onForceClose:i.forceClosePopup((function(){return r({isCrossClose:!0})})),url:i.url})),i.messageBinding=(o=window,u={finish:i.handleFinishPayment(t,r,e.successUrl,e.failUrl)},o.addEventListener("message",c=function(e){if(e&&e.data){var t=JSON.parse(e.data);t.event&&"function"==typeof u[t.event]&&u[t.event](t.content)}},!1),c),i.submitForm(i.paymentPage.name,a,i.url+"/popup"),function(){s(document.body,q);var e=document.getElementsByTagName("html")[0];s(e,q)}()}}))})),t(this,"openWindow",(function(e){void 0===e&&(e={});var t=n({},e,{publicId:i.publicId,style:e.style,version:i.version,extra:e.extra});i.submitForm("_blank",t,i.url)})),t(this,"replace",(function(e){void 0===e&&(e={});var t=n({},e,{publicId:i.publicId,style:e.style,version:i.version,extra:e.extra});i.submitForm("_self",t,i.url)})),t(this,"handleFinishPayment",(function(e,t,n,r){return function(o){"success"===o.result&&(e(),n)?k(n):"failed"===o.result&&(t({isCrossClose:!1}),r)?k(r):i.forceClosePopup()()}})),this.mount=r.targetElem instanceof HTMLElement?r.targetElem:document.body,this.publicId=e,this.version="1.1.17",this.url="/"!==(o=r.url||"https://pay.raif.ru/pay")[o.length-1]?o:o.slice(0,o.length-1)},V=null,function(){function e(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];V=u(W,t)}var t=e.prototype;return t.openPopup=function(){var e;return(e=V).openPopup.apply(e,arguments)},t.openWindow=function(){var e;return(e=V).openWindow.apply(e,arguments)},t.replace=function(){var e;return(e=V).replace.apply(e,arguments)},e}());window.PaymentPageSdk=Q}();
